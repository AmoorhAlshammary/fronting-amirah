{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\laser\\\\Desktop\\\\fronting-amirah\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\laser\\\\Desktop\\\\fronting-amirah\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\laser\\\\Desktop\\\\fronting-amirah\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect}from'react';import{base,A}from'./Firebase/Config';var useStorage=function useStorage(file){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),progress=_useState2[0],setProgress=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),url=_useState6[0],setUrl=_useState6[1];useEffect(function(){var storaged=base.ref(file.name);var collectiond=A.collection('images');storaged.put(file).on('state_changed',function(snap){var img=snap.bytesTransferred/snap.totalBytes*100;setProgress(img);},function(err){setError(err);},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return storaged.getDownloadURL();case 2:url=_context.sent;_context.next=5;return collectiond.add({url:url});case 5:setUrl(url);case 6:case\"end\":return _context.stop();}}},_callee);})));},[file]);return{progress:progress,url:url,error:error};};export default useStorage;","map":{"version":3,"sources":["C:/Users/laser/Desktop/fronting-amirah/src/useStorage.js"],"names":["useState","useEffect","base","A","useStorage","file","progress","setProgress","error","setError","url","setUrl","storaged","ref","name","collectiond","collection","put","on","snap","img","bytesTransferred","totalBytes","err","getDownloadURL","add"],"mappings":"oZAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAAQC,IAAR,CAAaC,CAAb,KAAqB,mBAArB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,IAAD,CAAU,CAC3B,cAAgCL,QAAQ,CAAC,CAAD,CAAxC,wCAAOM,QAAP,eAAiBC,WAAjB,eACA,eAA0BP,QAAQ,CAAC,IAAD,CAAlC,yCAAOQ,KAAP,eAAcC,QAAd,eACA,eAAsBT,QAAQ,CAAC,IAAD,CAA9B,yCAAOU,GAAP,eAAYC,MAAZ,eAEAV,SAAS,CAAC,UAAM,CAEd,GAAMW,CAAAA,QAAQ,CAAGV,IAAI,CAACW,GAAL,CAASR,IAAI,CAACS,IAAd,CAAjB,CACA,GAAMC,CAAAA,WAAW,CAAGZ,CAAC,CAACa,UAAF,CAAa,QAAb,CAApB,CAEAJ,QAAQ,CAACK,GAAT,CAAaZ,IAAb,EAAmBa,EAAnB,CAAsB,eAAtB,CAAuC,SAACC,IAAD,CAAU,CAC/C,GAAIC,CAAAA,GAAG,CAAID,IAAI,CAACE,gBAAL,CAAwBF,IAAI,CAACG,UAA9B,CAA4C,GAAtD,CACAf,WAAW,CAACa,GAAD,CAAX,CACD,CAHD,CAGG,SAACG,GAAD,CAAS,CACVd,QAAQ,CAACc,GAAD,CAAR,CACD,CALD,sEAKG,iKACiBX,CAAAA,QAAQ,CAACY,cAAT,EADjB,QACKd,GADL,qCAEKK,CAAAA,WAAW,CAACU,GAAZ,CAAgB,CAAEf,GAAG,CAAHA,GAAF,CAAhB,CAFL,QAGDC,MAAM,CAACD,GAAD,CAAN,CAHC,sDALH,IAUD,CAfQ,CAeN,CAACL,IAAD,CAfM,CAAT,CAiBA,MAAO,CAAEC,QAAQ,CAARA,QAAF,CAAYI,GAAG,CAAHA,GAAZ,CAAiBF,KAAK,CAALA,KAAjB,CAAP,CACD,CAvBD,CAyBA,cAAeJ,CAAAA,UAAf","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport {base,A} from './Firebase/Config';\r\n\r\nconst useStorage = (file) => {\r\n  const [progress, setProgress] = useState(0);\r\n  const [error, setError] = useState(null);\r\n  const [url, setUrl] = useState(null);\r\n\r\n  useEffect(() => {\r\n\r\n    const storaged = base.ref(file.name);\r\n    const collectiond = A.collection('images');\r\n    \r\n    storaged.put(file).on('state_changed', (snap) => {\r\n      let img = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n      setProgress(img);\r\n    }, (err) => {\r\n      setError(err);\r\n    }, async () => {\r\n      const url = await storaged.getDownloadURL();\r\n      await collectiond.add({ url });\r\n      setUrl(url);\r\n    });\r\n  }, [file]);\r\n\r\n  return { progress, url, error };\r\n}\r\n\r\nexport default useStorage;"]},"metadata":{},"sourceType":"module"}