{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\laser\\\\Desktop\\\\fronting-amirah\\\\src\\\\components\\\\OneDecoration.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction OneDecoration(_ref) {\n  _s();\n\n  let {\n    token,\n    user\n  } = _ref;\n  const {\n    id\n  } = useParams(); //console.log(id);\n\n  const [decorationId, setDecorationId] = useState('');\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n  const [price, setPrice] = useState(0);\n  const [img, setImg] = useState('');\n  const [reservation, setReservation] = useState(null);\n  const history = useHistory();\n  useEffect(() => {\n    // console.log('use effect')\n    const getOneDecoration = async () => {\n      if (token) {\n        // console.log(\"kkkkkk\");\n        const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/decoration/${id}`, {\n          headers: {\n            authorization: `Bearer ${token}`\n          }\n        }); // console.log(response.data);\n\n        setDecorationId(response.data.oneDecoration._id);\n        setName(response.data.oneDecoration.name);\n        setDescription(response.data.oneDecoration.description);\n        setImg(response.data.oneDecoration.img);\n        setPrice(response.data.oneDecoration.price);\n        setReservation(response.data.reservation);\n      } else {\n        history.push('/login');\n      }\n    };\n\n    getOneDecoration();\n  }, []);\n\n  const postReserve = async () => {\n    // console.log(decorationId, user._id)\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/reservation`, {\n        decorationId: decorationId,\n        userId: user._id,\n        date: new Date()\n      }, {\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      }); // console.log(response)\n\n      history.push(`/reservation/user/view`);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const cancelReservation = async () => {\n    try {\n      const response = await axios.delete(`${process.env.REACT_APP_BACKEND_URL}/reservation/${reservation._id}`, {\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      }); // console.log(response)\n\n      history.push('/decoration');\n    } catch (error) {\n      console.log(error);\n    }\n  }; // admin functions\n\n\n  const updateDecoration = async () => {\n    try {\n      const response = await axios.put(`${process.env.REACT_APP_BACKEND_URL}/decoration`, {\n        id: decorationId,\n        name,\n        description,\n        img,\n        price\n      }, {\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      });\n\n      if (response.status === 201) {\n        // show alert update done\n        alert(`Decoration : ${name} updated successfully`);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const deleteDecoration = async () => {\n    try {\n      const response = await axios.delete(`${process.env.REACT_APP_BACKEND_URL}/decoration/${decorationId}`, {\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      });\n\n      if (response.status === 201) {\n        // show alert update done\n        alert(`Decoration : ${response.data.name} deleted successfully with all reservations`);\n        history.push('/decoration');\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: user.isAdmin ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card m-2\",\n      style: {\n        width: 300\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: img,\n        className: \"card-img-top\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Update Decoration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: [\"Name: \", name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Description: \", description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [\"Price: \", price, \" SR\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control mb-2\",\n          placeholder: \"Name\",\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control mb-2\",\n          placeholder: \"Decoration\",\n          onChange: e => setDescription(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control mb-2\",\n          placeholder: \"Image URL\",\n          onChange: e => setImg(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          className: \"form-control mb-2\",\n          placeholder: \"price\",\n          onChange: e => setPrice(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success m-2\",\n          onClick: () => updateDecoration(),\n          children: \"UPDATE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: () => deleteDecoration(),\n          children: \"DELETE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }, this) :\n    /*#__PURE__*/\n    // https://getbootstrap.com/docs/5.1/components/card/\n    _jsxDEV(\"div\", {\n      className: \"card m-2\",\n      style: {\n        width: 300\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: img,\n        className: \"card-img-top\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [price, \" SR\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 23\n        }, this), reservation ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-dark\",\n          onClick: () => cancelReservation(),\n          children: \"CANCEL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-info\",\n          onClick: () => postReserve(),\n          children: \"RESERVE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s(OneDecoration, \"+PrWuXHGCa95MtT1xf/Z/YtgeCg=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = OneDecoration;\nexport default OneDecoration;\n\nvar _c;\n\n$RefreshReg$(_c, \"OneDecoration\");","map":{"version":3,"sources":["C:/Users/laser/Desktop/fronting-amirah/src/components/OneDecoration.js"],"names":["useEffect","useState","useHistory","useParams","axios","OneDecoration","token","user","id","decorationId","setDecorationId","name","setName","description","setDescription","price","setPrice","img","setImg","reservation","setReservation","history","getOneDecoration","response","get","process","env","REACT_APP_BACKEND_URL","headers","authorization","data","oneDecoration","_id","push","postReserve","post","userId","date","Date","error","console","log","cancelReservation","delete","updateDecoration","put","status","alert","deleteDecoration","isAdmin","width","e","target","value"],"mappings":"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","sourcesContent":["import {useEffect, useState} from 'react';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\n\r\nfunction OneDecoration({token, user}) {\r\n    const { id } = useParams();\r\n    //console.log(id);\r\n\r\n    const [decorationId, setDecorationId] = useState('')\r\n    const [name, setName] = useState('')\r\n    const [description, setDescription] = useState('')\r\n    const [price, setPrice] = useState(0)\r\n    const [img, setImg] = useState('')\r\n\r\n\r\n    const [reservation, setReservation] = useState(null);\r\n\r\n    const history = useHistory();\r\n\r\n    useEffect(()=> {\r\n      // console.log('use effect')\r\n      const getOneDecoration = async ()=>{\r\n          if(token){\r\n            // console.log(\"kkkkkk\");\r\n            const response = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/decoration/${id}`, { headers: { authorization: `Bearer ${token}` } });\r\n            // console.log(response.data);\r\n            setDecorationId(response.data.oneDecoration._id);\r\n            setName(response.data.oneDecoration.name);\r\n            setDescription(response.data.oneDecoration.description);\r\n            setImg(response.data.oneDecoration.img);\r\n            setPrice(response.data.oneDecoration.price);\r\n\r\n            setReservation(response.data.reservation);\r\n            \r\n          }else{\r\n            history.push('/login');\r\n          }\r\n      }\r\n        getOneDecoration();\r\n    }, []);\r\n\r\n\r\n\r\n    const postReserve = async () => {\r\n      // console.log(decorationId, user._id)\r\n        try {\r\n      \r\n          const response = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/reservation`, {\r\n            decorationId: decorationId,\r\n            userId: user._id,\r\n            date: new Date()\r\n          },\r\n            { headers: { authorization: `Bearer ${token}` } }\r\n          )\r\n          // console.log(response)\r\n          history.push(`/reservation/user/view`)\r\n        } catch (error) {\r\n          console.log(error)\r\n        }\r\n    }\r\n\r\n    const cancelReservation = async () => {\r\n        try {\r\n  \r\n          const response = await axios.delete(`${process.env.REACT_APP_BACKEND_URL}/reservation/${reservation._id}`,\r\n            { headers: { authorization: `Bearer ${token}` } }\r\n          )\r\n          // console.log(response)\r\n          history.push('/decoration')\r\n        } catch (error) {\r\n          console.log(error)\r\n        }\r\n    }\r\n\r\n\r\n    // admin functions\r\n    const updateDecoration = async ()=>{\r\n      try {\r\n        const response = await axios.put(`${process.env.REACT_APP_BACKEND_URL}/decoration`,{\r\n          id: decorationId,\r\n          name,\r\n          description,\r\n          img,\r\n          price\r\n        },\r\n        {headers: {authorization: `Bearer ${token}`}}\r\n        )\r\n        if(response.status===201){\r\n          // show alert update done\r\n          alert(`Decoration : ${name} updated successfully`)\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n    const deleteDecoration = async ()=>{\r\n      try {\r\n        const response = await axios.delete(`${process.env.REACT_APP_BACKEND_URL}/decoration/${decorationId}`,\r\n        {headers: {authorization: `Bearer ${token}`}}\r\n        )\r\n        if(response.status===201){\r\n          // show alert update done\r\n          alert(`Decoration : ${response.data.name} deleted successfully with all reservations`)\r\n          history.push('/decoration')\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n \r\n    return (\r\n        <div className='container'>\r\n                {user.isAdmin ?\r\n                  <div className=\"card m-2\" style={{width: 300}}>\r\n                    <img src={img} className=\"card-img-top\" alt=\"\" />\r\n                    <div className=\"card-body\">\r\n                      <h3>Update Decoration</h3>\r\n                      <h5 className=\"card-title\">Name: {name}</h5>\r\n                      <p className=\"card-text\">Description: {description}</p>\r\n                      <p className=\"card-text\">Price: {price} SR</p>\r\n                      <input type=\"text\" className=\"form-control mb-2\" placeholder='Name' onChange={(e)=> setName(e.target.value)} />\r\n                      <input type=\"text\" className=\"form-control mb-2\" placeholder='Decoration' onChange={(e)=> setDescription(e.target.value)} />\r\n                      <input type=\"text\" className=\"form-control mb-2\" placeholder='Image URL' onChange={(e)=> setImg(e.target.value)} />\r\n                      <input type=\"number\" className=\"form-control mb-2\" placeholder='price' onChange={(e)=> setPrice(e.target.value)} />\r\n                      <button className='btn btn-success m-2' onClick={()=>updateDecoration()}>UPDATE</button>\r\n                      <button className='btn btn-danger' onClick={()=>deleteDecoration()}>DELETE</button>\r\n                    </div>\r\n                  </div>\r\n                  :\r\n                  // https://getbootstrap.com/docs/5.1/components/card/\r\n                  <div className=\"card m-2\" style={{width: 300}}>\r\n                    <img src={img} className=\"card-img-top\" alt=\"\" />\r\n                    <div className=\"card-body\">\r\n                      <h5 className=\"card-title\">{name}</h5>\r\n                      <p className=\"card-text\">{description}</p>\r\n                      <p className=\"card-text\">{price} SR</p>\r\n                      {reservation ? \r\n                        <button className='btn btn-dark' onClick={ ()=>cancelReservation() }>CANCEL</button> \r\n                        :\r\n                        <button className='btn btn-info' onClick={ ()=>postReserve() }>RESERVE</button>\r\n                      }\r\n                    </div>\r\n                  </div>\r\n                }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OneDecoration\r\n"]},"metadata":{},"sourceType":"module"}